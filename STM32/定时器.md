# 定时器：

作者：姜蘅洋:pen:

## 1.基本定时器：

#### 1.1 STM32F103ZET6：

- 该型号的单片机拥有两个**基本定时器**：**TIM6、TIM7**

#### 1.2 基本定时器介绍：

- 基本定时器的**功能有限**，通常仅用来执行**延时**。
- 基本定时器**组成**：
  - **16位自动重装载计数器**
  - **16位可编程预分频器**
    - 分频系数：**1～65536**，当该寄存器中的值为0时，表示分频系数为1。
- 基本定时器的**时基单元**：
  - **预分频寄存器(TIMx_PSC)**：
    - 若想驱动STM32中的定时器，那么需要给定时器输入**时钟信号**(时钟信号是数字电路的**心脏**:heart:)。
    - 预分频寄存器的作用：**改变输入时钟的频率，输出一个与输入时钟信号频率不同的时钟信号**。
      - 输出的时钟信号就是负责定时器**计数**的时钟，因此**预分频器**能够改变定时器的**计数速度**。
    - **定时器的输入时钟**：
      - 基本定时器的时钟源：**CK_INT**，即**内部时钟**。
        - 然而，这个**内部时钟**到底指什么呢？
          - 不是指**HSI**(高速内部时钟)和**LSI**(低速内部时钟)
          - **CK_INT—内部时钟**指的是：**基本定时器内部所挂载总线的时钟**:heavy_check_mark:。
        - 基本定时器挂载在**APB1总线**上：
          - ![image-20231001214447162](https://nickaljy-pictures.oss-cn-hangzhou.aliyuncs.com/image-20231001214447162.png)
        - 参考**STM32F103的时钟树**:deciduous_tree:：
      - <img src="https://nickaljy-pictures.oss-cn-hangzhou.aliyuncs.com/image-20231001213359408.png" alt="image-20231001213359408" style="zoom: 67%;" />
      - 挂载在**APB1总线**上面的**peripheral**时钟频率是**36MHz**。
      - 挂载在**APB1总线**上面的**Timer**的时钟频率是**72MHz**。
    - 假设**TIMx_PSC**中的值是**71**，那么**预分频系数**是**72**，此时输入到基本定时器中的时钟频率是**72MHz/72 = 1MHz**。
  - **计数器寄存器(TIMx_CNT)**与**自动重装载寄存器(TIMx_ARR)**：
    - 对于STM32的基本定时器来讲，只有一种计数模式：**递增计数**。
    - 计数器从0**累加计数**到**自动重装载数值**，产生一个**计数器溢出事件**，然后重新从0开始计数。
    - **计数器溢出事件**：
      - 对于基本定时器来讲，这个溢出事件通常是**产生更新中断**(通俗点理解为中断)。
- 基本定时器的**驱动代码**(HAL):pick:：
  - 


## 2.通用定时器：

#### 1.1 STM32F103ZET6：

- 该型号的单片机拥有四个**通用定时器**：**TIM2、TIM3、TIM4、TIM5**
- 

## 3.高级定时器：

#### 1.1 STM32F103ZET6：

- 该型号的单片机拥有两个**高级定时器**：**TIM1、TIM8**
- 