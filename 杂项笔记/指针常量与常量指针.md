## 指针常量与常量指针

### 一、常量指针

#### 1. 定义：
常量指针是指：指针指向的内容是常量。
常量指针有以下两种定义方式。
```c
const int * num;
int const * num;
```
#### 2. 注意：
1. 常量指针说的是不能通过这个指针改变变量的值，但可以通过其他的引用来改变变量的值。
```c
int cnt=5;
const int* num=&cnt;
cnt=6;
```

2. 常量指针指向的值不能改变，但这并不意味着指针本身不能改变，常量指针可以指向其他的地址。
```c
int cnt=5;
int tmp=6;
const int* num=&cnt;
num=&tmp;
```



### 二、指针常量

#### 1.定义：
指针常量是指：指针本身是个常量，不能再指向其他的地址，写法如下：
```c
int *const num;
```
#### 2.注意：
指针常量指向的地址不能改变，但是地址中保存的数值是可以改变的，可以通过其他指向改地址的指针来修改。
```c
int cnt=5;
int* const num=&cnt;//num是一个指针常量，指向cnt且只能指向cnt，不能改变
int *tmp=&cnt;//tmp是一个指针，指向cnt
*tmp=6;//这行代码改变了tmp所指的变量（即cnt）的值
```



### 三、常量指针&指针常量的区分

区分常量指针和指针常量的关键就在于**星号的位置**，我们以星号为分界线。

- 如果const在星号的左边，则为**常量指针**
- 如果const在星号的右边，则为**指针常量**

如果我们将星号读作“指针”，将const读作“常量”的话，内容正好符合。

- `int const * num；`是常量指针，

- `int *const num；`是指针常量。

  


### 四、指向常量的常指针

还有一种情况是指向常量的常指针，这相当于是常量指针与指针常量的结合，指针指向的位置不能改变并且也不能通过这个指针改变变量的值，例如

```c
const int* const num;
```

这个代表num所指向的对象的值以及它本身的值（所指对象的地址）都不能被改变。



### 五、const和volatile

#### 1. 修改const常量
直接修改const常量是不允许的（编译就会报错），所以只能通过指针修改其地址上的值。

#### 2. const与volatile同时修饰一个变量

1. **const只在编译期有用，在运行期无用**
 const在编译期保证在C的“源代码”中，没有对其修饰的变量进行修改的地方（如有则报错，编译不通过），而运行期该变量的值是否被改变则不受const的限制。


2. **volatile在编译期和运行期都有用**
在编译期告诉编译器：请不要做自以为是的优化，这个变量的值可能会变掉；
在运行期：每次用到该变量的值，都从内存中取该变量的值。